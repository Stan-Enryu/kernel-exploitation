#!/bin/bash

if [[ $# -eq 0 ]] ; then
    echo 'usage : decompress <name cpio> '
    echo 'Support : cpio , cpio.gz '
    echo ''
    echo 'Example'
    echo 'File name : initramfs.cpio.gz '
    echo 'command : decompress initramfs'
    exit 0
fi

if [ -e "$1.cpio.gz" ]; then
	mkdir $1
	cd $1
	cp ../$1.cpio.gz .
	gunzip ./$1.cpio.gz
	cpio -idm < ./$1.cpio
	rm $1.cpio
    echo "Finish $1.cpio.gz"
elif [ -e "$1.cpio" ]; then
	mkdir $1
	cd $1
	cp ../$1.cpio .
	cpio -idm < ./$1.cpio
	rm $1.cpio
	echo "Finish $1.cpio"
else 
    echo "File does not exist"
fi


